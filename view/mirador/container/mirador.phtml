<?php
$translate = $this->plugin('translate');
$escape = $this->plugin('escapeHtml');
$this->htmlElement('body')->appendAttribute('class', 'item resource show');
// $embedMedia = $this->siteSetting('item_media_embed', false);
$embedMedia = false;
$itemMedia = $item->media();

$this->headLink()->appendStylesheet($this->assetUrl('css/mirador-combined.css'));

$this->headScript()->appendFile($this->assetUrl('js/mirador.js', 'Mirador'));

function console_log( $data ){
  echo '<script>';
  echo 'console.log('. json_encode( $data ) .')';
  echo '</script>';
}

//console_log($itemMedia);

$manifest_url = $this->iiifUrl($item) ;
$mirador_url = "http://mirador.britishart.yale.edu/?manifest=$manifest_url";

?>
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="stylesheet" type="text/css" href="/modules/Mirador/asset/css/mirador-combined.css">
    <title>Mirador Viewer</title>

        <?php echo $this->headStyle(); ?>
        <?php echo $this->headScript(); ?>
    <style type="text/css">
     #viewer {
       width: 100%;
       height: 100%;
       position: fixed;
     }
    </style>
  </head>
  <body>
    <div id="viewer"></div>

    <script type="text/javascript">

     $(function() {
       myMiradorInstance = Mirador({
         "id": "viewer",
         "layout": "1x1",
         "buildPath": "",
         "data": [
           { "manifestUri": "<?php echo $manifest_url; ?>", "location": "SlaveryImages.org" }
         ],
         "windowObjects": [{
           loadedManifest: "<?php echo $manifest_url; ?>",
           viewType: "ImageView"
         }],
         'windowSettings' : {
           "canvasControls": { // The types of controls available to be displayed on a canvas
             "annotations" : {
               "annotationLayer" : false, //whether or not to make annotation layer available in this window
               "annotationCreation" : false, /*whether or not to make annotation creation available in this window,
                            only valid if annotationLayer is set to True and an annotationEndpoint is defined.
                            This setting does NOT affect whether or not a user can edit an individual annotation that has already been created.*/
               "annotationState" : 'off', //[_'off'_, 'on'] whether or not to turn on the annotation layer on window load
               "annotationRefresh" : false, //whether or not to display the refresh icon for annotations
             },
             "imageManipulation" : {
               "manipulationLayer" : false,
               "controls" : {
                 "rotate" : false,
                 "brightness" : false,
                 "contrast" : false,
                 "saturate" : false,
                 "grayscale" : false,
                 "invert" : false,
                 "mirror" : false
               }
             }
           }
         }
       });
     });
    </script>
  </body>
</html>





<?php $this->trigger('view.show.after'); ?>